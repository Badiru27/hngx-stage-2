# HNGX Stage 2 Task User CRUD API Detailed Documentation

## Overview

This document provides information about the CRUD (Create, Read, Update, Delete) operations available through the User API.

The API allows you to manage user data, including creating, reading, updating, and deleting user records.

## API Endpoints

The following API endpoints are available:

### Create User

- **Endpoint:** `POST /api`
- **Description:** Create a new user record.
- **Request Body:** A JSON object representing the user with the following fields:
  - `name` (string, required): The name of the user.
- **Response:** JSON response with the newly created user's ID and name.
- **Status Codes:**
  - `201 Created`: User successfully created.
  - `400 Bad Request`: Invalid request format.
  - `403 Forbidden Request`: User already exist.
  - `500 Internal Server Error`: Server error.

### Get User

- **Endpoint:** `GET /api/:userId`
- **Description:** Retrieve a user record by their name.
- **Request Params:** The `name` parameter in the URL specifies the name of the user to retrieve.
- **Response:** JSON response with the user's ID and name.
- **Status Codes:**
  - `200 OK`: User found and retrieved.
  - `404 Not Found`: User with the specified name not found.
  - `500 Internal Server Error`: Server error.

### Update User

- **Endpoint:** `PUT /api/:userId`
- **Description:** Update an existing user record by their name.
- **Request Params:** The `userId` parameter in the URL specifies the name of the user to update.
- **Request Body:** A JSON object representing the user with the following fields:
  - `name` (string, required): The updated name of the user.
- **Response:** JSON response with the updated user's ID and name.
- **Status Codes:**
  - `200 OK`: User successfully updated.
  - `400 Bad Request`: Invalid request format.
  - `404 Not Found`: User with the specified name not found.
  - `500 Internal Server Error`: Server error.

### Delete User

- **Endpoint:** `DELETE /api/:userId`
- **Description:** Delete an existing user record by their name.
- **Request Params:** The `name` parameter in the URL specifies the name of the user to delete.
- **Response:** JSON response indicating the success of the deletion operation.
- **Status Codes:**
  - `204 No Content`: User successfully deleted.
  - `404 Not Found`: User with the specified name not found.
  - `500 Internal Server Error`: Server error.

## User Data Model

The User data model consists of the following fields:

- `id` (string, autogenerated): The unique identifier for the user.
- `name` (string, required): The name of the user.

The `id` field is autogenerated and should not be provided when creating a new user; it will be generated automatically.

1. Create a new user:

   ```http
   Example request:

   POST /api
   Content-Type: application/json

   {
       "name": "John Doe"
   }
   
   Example response:
   
   {
        "id": "64ff032c3449236d1547a78a",
        "name": "John Doe"
   }

   ```

2. Retrieve a user by id

    ```http
   GET /api/userId

   Example Response:
   
   {
        "id": "64ff032c3449236d1547a78a",
        "name": "John Doe"
   }
   ```

3. Update a user by name:

      ```http
   Example request:

   PUT /api/userId
   Content-Type: application/json

   {
       "name": "John Mark"
   }
   
   Example response:
   
   {
        "id": "64ff032c3449236d1547a78a",
        "name": "John Mark"
   }

   ```

4. Delete a user by name:

   ```http
   DELETE /api/userId
   ```

## API deployment

### Setting up Your API Locally

This guide will walk you through setting up your API locally. Please make sure you have Go installed on your machine and a MongoDB database ready with the connection URI (MONGOURI).

#### Prerequisites

- [Go](https://golang.org/dl/) installed on your local machine.
- A MongoDB database and its connection URI (MONGOURI).

#### Steps

1. **Clone the Repository**

   Clone your API repository from your version control system (e.g., GitHub):

   ```shell
   git clone https://github.com/Badiru27/hngx-stage-2/
   cd hngx-stage-2
   ```

2. **Create a .env File**

    Create a `.env` file in the root directory of your API project. Add the MONGOURI variable with your MongoDB connection URI:

    ``` shell
        MONGOURI=mongodb://localhost:27017/your-database-name
    ```

3. **Run the API Locally**

    You can start your API locally by running the following command from the root directory of your project:

    ``` shell
    go run main.go
    ```

### Setting up Your API on a Server

This guide provides a concise overview of how to deploy the API on a server.

#### Server Deployment Prerequisites

1. **Server**: Access to a remote server.
2. **SSH Access**: SSH access to the server.
3. **Go Installed**: Go should be installed on the server.
4. **MongoDB**: MongoDB database with a connection URI (MONGOURI).

#### Deployment Steps

1. **Transfer Code**: Use `scp` to copy your API code to the server.

2. **SSH Access**: SSH into the server.

3. **Build API**: Navigate to the code directory and build your API with `go build`.

4. **Run API**: Start your API with `./your-api-binary`.

5. **Set up Reverse Proxy (Optional)**: Configure a reverse proxy using Nginx or Apache for domain-based access.

6. **Configure Environment Variables**: Set environment variables like `MONGOURI` on the server.

7. **Secure Your API (Optional)**: Implement security measures and authentication.

8. **Monitoring and Maintenance**: Set up monitoring, logging, and regular updates.

9. **Testing**: Test the deployed API with tools like Postman or curl.

10. **Documentation and Support**: Provide API documentation and support channels for users.

Congratulations! Your API is now deployed and ready to serve requests on the server.
